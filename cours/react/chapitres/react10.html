<!DOCTYPE html>
<html lang="fr">
  <meta charset="UTF-8">
  <title>Chapitre 10 - Gestion d‚Äô√©tat avanc√©e</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: #fff;
      color: #333;
    }
    header {
      background-color: #4a54f1;
      padding: 2rem;
      text-align: center;
      color: white;
      box-shadow: 0 4px 15px rgba(74, 84, 241, 0.4);
    }
    header h1 {
      margin: 0;
      font-size: 2.5rem;
    }
    header p {
      margin: 0;
      font-size: 1.2rem;
      color: #dcdcdccc;
    }
    main {
      max-width: 800px;
      margin: 2rem auto;
      padding: 2rem;
      background: #f0f4ff;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(74, 84, 241, 0.15);
    }
    h1, h2 {
      color: #2c3e95;
    }
    pre {
      background: #e6eaff;
      padding: 1rem;
      border-radius: 5px;
      overflow-x: auto;
    }
    .btn {
      display: inline-block;
      margin-top: 2rem;
      padding: 0.8rem 1.5rem;
      background-color: #4a54f1;
      color: white;
      text-decoration: none;
      border-radius: 8px;
    }
    footer {
      text-align: center;
      padding: 1.8rem;
      font-size: 1rem;
      background-color: #f7f9ff;
      color: #444;
    }
    a {
      color: #4a54f1;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3429663628581948" crossorigin="anonymous"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3429663628581948" crossorigin="anonymous"></script></head>
<body>
  <header>
    <h1>Chapitre 10 : Gestion d‚Äô√©tat avanc√©e üìà</h1>
    <p>Apprends √† g√©rer l‚Äô√©tat global avec Context API et Redux pour des applications React complexes.</p>
  </header>

  <main>
    <h2>üîπ Qu'est-ce que la gestion d‚Äô√©tat avanc√©e ?</h2>
    <p>La gestion d‚Äô√©tat avanc√©e permet de partager et de synchroniser des donn√©es entre plusieurs composants dans une application React. La <strong>Context API</strong> est une solution int√©gr√©e pour les √©tats globaux simples, tandis que <strong>Redux</strong> offre une gestion centralis√©e pour les applications complexes.</p>
    <p><strong>Caract√©ristiques principales :</strong></p>
    <ul>
      <li><strong>Context API</strong>: Fournit un √©tat accessible √† plusieurs composants via un <code>Provider</code>.</li>
      <li><strong>Redux</strong>: Centralise l‚Äô√©tat dans un store avec des actions et des reducers.</li>
      <li><strong>Utilisation</strong>: Context pour les petits projets, Redux pour les grands.</li>
    </ul>

    <h2>üîπ Pourquoi utiliser Context API ou Redux ?</h2>
    <p>Ces outils √©vitent de passer des props √† travers de nombreux composants (prop drilling) et permettent de g√©rer des √©tats globaux comme l‚Äôauthentification, les th√®mes, ou les paniers d‚Äôachat de mani√®re efficace.</p>
    <p><strong>Exemple</strong>: Basculer un th√®me sombre/clair avec Context ou g√©rer un compteur global avec Redux.</p>

    <h2>üîπ Exemple 1 : Bascule de th√®me avec Context API</h2>
    <p>Utilise Context pour g√©rer un th√®me :</p>
    <pre><code>
// src/App.js
import React, { createContext, useContext, useState } from 'react';

const ThemeContext = createContext();

function ThemeProvider({ children }) {
  const [theme, setTheme] = useState('light');
  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

function ThemeToggle() {
  const { theme, setTheme } = useContext(ThemeContext);
  return (
    <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>
      Basculer vers {theme === 'light' ? 'sombre' : 'clair'}
    </button>
  );
}

function App() {
  return (
    <ThemeProvider>
      <ThemeToggle />
    </ThemeProvider>
  );
}

export default App;
    </code></pre>
    <p><strong>Explication</strong>:</p>
    <ul>
      <li><code>createContext</code>: Cr√©e un contexte pour le th√®me.</li>
      <li><code>Provider</code>: Fournit l‚Äô√©tat √† tous les composants enfants.</li>
      <li><code>useContext</code>: Acc√®de √† l‚Äô√©tat dans <code>ThemeToggle</code>.</li>
    </ul>
    <p><strong>R√©sultat</strong>: Bascule entre ‚Äúsombre‚Äù et ‚Äúclair‚Äù au clic √† <code>http://localhost:3000</code>.</p>

    <h2>üîπ Exemple 2 : Compteur avec Redux</h2>
    <p>Configure Redux pour un compteur :</p>
    <pre><code>
// src/index.js
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import { createStore } from 'redux';
import App from './App';

const initialState = { count: 0 };

function reducer(state = initialState, action) {
  switch (action.type) {
    case 'INCREMENT':
      return { count: state.count + 1 };
    default:
      return state;
  }
}

const store = createStore(reducer);

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById('root')
);

// src/App.js
import React from 'react';
import { useSelector, useDispatch } from 'react-redux';

function App() {
  const count = useSelector((state) => state.count);
  const dispatch = useDispatch();

  return (
    <div>
      <p>Compte : {count}</p>
      <button onClick={() => dispatch({ type: 'INCREMENT' })}>Incr√©menter</button>
    </div>
  );
}

export default App;
    </code></pre>
    <p><strong>Setup</strong>: <code>npm install redux react-redux</code></p>
    <p><strong>R√©sultat</strong>: Incr√©mente un compteur global.</p>

    <h2>üîπ Exemple 3 : Context avec plusieurs consommateurs</h2>
    <p>G√®re plusieurs donn√©es avec Context :</p>
    <pre><code>
// src/App.js
import React, { createContext, useContext, useState } from 'react';

const UserContext = createContext();

function UserProvider({ children }) {
  const [user, setUser] = useState({ name: 'Alice', loggedIn: false });
  return (
    <UserContext.Provider value={{ user, setUser }}>
      {children}
    </UserContext.Provider>
  );
}

function UserInfo() {
  const { user } = useContext(UserContext);
  return <p>Nom : {user.name}</p>;
}

function LoginButton() {
  const { user, setUser } = useContext(UserContext);
  return (
    <button onClick={() => setUser({ ...user, loggedIn: !user.loggedIn })}>
      {user.loggedIn ? 'D√©connexion' : 'Connexion'}
    </button>
  );
}

function App() {
  return (
    <UserProvider>
      <UserInfo />
      <LoginButton />
    </UserProvider>
  );
}

export default App;
    </code></pre>
    <p><strong>R√©sultat</strong>: Affiche le nom et bascule l‚Äô√©tat de connexion.</p>

    <h2>üîπ Exemple 4 : Redux avec useSelector et useDispatch</h2>
    <p>Utilise les hooks Redux :</p>
    <pre><code>
// src/index.js
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import { createStore } from 'redux';
import App from './App';

const initialState = { count: 0 };

function reducer(state = initialState, action) {
  switch (action.type) {
    case 'INCREMENT':
      return { count: state.count + 1 };
    case 'DECREMENT':
      return { count: state.count - 1 };
    default:
      return state;
  }
}

const store = createStore(reducer);

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById('root')
);

// src/App.js
import React from 'react';
import { useSelector, useDispatch } from 'react-redux';

function App() {
  const count = useSelector((state) => state.count);
  const dispatch = useDispatch();

  return (
    <div>
      <p>Compte : {count}</p>
      <button onClick={() => dispatch({ type: 'INCREMENT' })}>Incr√©menter</button>
      <button onClick={() => dispatch({ type: 'DECREMENT' })}>D√©cr√©menter</button>
    </div>
  );
}

export default App;
    </code></pre>
    <p><strong>R√©sultat</strong>: Incr√©mente ou d√©cr√©mente le compteur.</p>

    <h2>üîπ Exemple 5 : Combinaison Context et Redux</h2>
    <p>Utilise Context pour le th√®me et Redux pour le compteur :</p>
    <pre><code>
// src/index.js
import React from 'react';
import ReactDOM from 'react-dom';
import { Provider } from 'react-redux';
import { createStore } from 'redux';
import App from './App';

const initialState = { count: 0 };

function reducer(state = initialState, action) {
  switch (action.type) {
    case 'INCREMENT':
      return { count: state.count + 1 };
    default:
      return state;
  }
}

const store = createStore(reducer);

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById('root')
);

// src/App.js
import React, { createContext, useContext, useState } from 'react';
import { useSelector, useDispatch } from 'react-redux';

const ThemeContext = createContext();

function ThemeProvider({ children }) {
  const [theme, setTheme] = useState('light');
  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

function Counter() {
  const count = useSelector((state) => state.count);
  const dispatch = useDispatch();
  const { theme } = useContext(ThemeContext);

  return (
    <div style={{ background: theme === 'light' ? '#fff' : '#333', color: theme === 'light' ? '#000' : '#fff' }}>
      <p>Compte : {count}</p>
      <button onClick={() => dispatch({ type: 'INCREMENT' })}>Incr√©menter</button>
    </div>
  );
}

function ThemeToggle() {
  const { setTheme, theme } = useContext(ThemeContext);
  return (
    <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>
      Basculer vers {theme === 'light' ? 'sombre' : 'clair'}
    </button>
  );
}

function App() {
  return (
    <ThemeProvider>
      <Counter />
      <ThemeToggle />
    </ThemeProvider>
  );
}

export default App;
    </code></pre>
    <p><strong>R√©sultat</strong>: G√®re le th√®me et le compteur ind√©pendamment.</p>

    <h2>üîπ Erreurs courantes √† √©viter</h2>
    <ul>
      <li><strong>Surutilisation de Redux</strong>: Utilise Context pour les √©tats simples.</li>
      <li><strong>Oubli du Provider</strong>: Sans <code>Provider</code>, <code>useContext</code> renvoie <code>undefined</code>.</li>
      <li><strong>Configuration Redux incorrecte</strong>: V√©rifie les reducers et le store.</li>
    </ul>

    <h2>üìù Exercice</h2>
    <p>1. Cr√©e un projet React avec <code>npx create-react-app mon-app</code>.<br>
    2. Cr√©e une application <code>Cart</code> utilisant Context API pour g√©rer un panier (ajout/suppression d‚Äôarticles).<br>
    3. Affiche le nombre total d‚Äôarticles dans le panier.<br>
    4. Cr√©e un fichier texte expliquant en 3 phrases la diff√©rence entre Context API et Redux.</p>

    <a href="react9.html" class="btn">‚¨ÖÔ∏è Chapitre 9 : Routing avec React Router</a>
  </main>

  <footer>
 <p><a href="../index .html">‚Üê Retour au menu React</a></p>
  </footer>
<script src="/adsense.js"></script>
</body>
</html>



